# 학생 과제 제출 및 관리 시스템 v1.0 기능 명세서

## 버전 정보
- **버전**: 1.0
- **릴리즈 날짜**: 2025년 7월 18일
- **개발 환경**: Streamlit + SQLite
- **지원 플랫폼**: 웹 브라우저

---

## 핵심 기능 개요

### 1. 사용자 인증 시스템

#### 1.1 역할 기반 로그인
- **학생 로그인**: 학번과 비밀번호를 통한 인증
- **교수 로그인**: 관리자 ID와 비밀번호를 통한 인증
- **보안**: SHA256 해싱을 통한 비밀번호 암호화
- **세션 관리**: Streamlit 세션 상태를 통한 로그인 상태 유지

#### 1.2 초기 계정 데이터
- **학생 계정 3개**: 20251111, 20252222, 20253333
- **교수 계정 3개**: admin1, admin2, admin3
- **공통 비밀번호**: 1234 (개발/테스트 환경용)

---

## 학생 기능 상세

### 2. 과제 제출 시스템

#### 2.1 파일 업로드
- **지원 파일 형식**: PDF, DOCX, DOC, TXT, ZIP, RAR
- **파일 크기**: 브라우저 및 서버 제한 내
- **저장 경로**: `storage/{학번}_{파일명}` 형식
- **업로드 피드백**: 진행률 표시 및 성공/실패 알림

#### 2.2 제출 과정
1. 파일 선택 (st.file_uploader)
2. 파일 정보 미리보기 (파일명, 크기)
3. 제출 버튼 클릭
4. 서버 저장 및 데이터베이스 기록
5. 성공 시 풍선 효과 및 안내 메시지
6. 자동 새로고침으로 제출 내역 업데이트

### 3. 제출 내역 관리

#### 3.1 제출 목록 조회
- **표시 정보**: 파일명, 제출시간, 평가상태
- **정렬**: 최신 제출순 (내림차순)
- **새로고침 기능**: 수동 데이터 업데이트 버튼

#### 3.2 제출물 삭제
- **삭제 기능**: 개별 제출물 삭제 가능
- **파일 정리**: 서버 파일과 데이터베이스 기록 동시 삭제
- **확인 없는 즉시 삭제**: 간편한 사용자 경험

### 4. 평가 결과 확인

#### 4.1 성적 표시
- **성적 등급**: A, B, C, D, F
- **시각적 표시**: 색상 이모지로 등급 구분
  - A: 🟢 (녹색)
  - B: 🔵 (파란색)
  - C: 🟡 (노란색)
  - D: 🟠 (주황색)
  - F: 🔴 (빨간색)

#### 4.2 피드백 확인
- **교수 코멘트**: 확장 가능한 영역에 표시
- **평가자 정보**: 평가한 교수명 표시
- **평가 시간**: 언제 평가되었는지 확인 가능

---

## 교수 기능 상세

### 5. 제출 현황 대시보드

#### 5.1 통계 정보
- **총 제출 건수**: 전체 과제 제출 수
- **제출한 학생 수**: 고유 학생 수
- **평가 완료 현황**: 평가 완료/전체 제출 비율
- **최근 제출**: 가장 최근 제출 시간

#### 5.2 제출물 목록
- **학생 정보**: 이름, 학번
- **파일 정보**: 파일명, 제출시간
- **평가 상태**: 현재 성적 또는 평가 대기 상태
- **액션 버튼**: 파일보기, 평가하기

### 6. 학생 파일 열람

#### 6.1 파일 내용 보기
- **지원 형식**: PDF, Word 문서, 텍스트 파일
- **PDF 처리**: PyPDF2를 통한 텍스트 추출
- **Word 처리**: python-docx를 통한 내용 추출
- **텍스트 처리**: UTF-8, CP949 인코딩 지원

#### 6.2 내용 표시
- **확장 영역**: 파일 내용을 텍스트 영역에 표시
- **높이 조절**: 400px 높이의 스크롤 가능한 영역
- **닫기 기능**: 내용 확인 후 영역 숨기기

### 7. 평가 시스템

#### 7.1 성적 부여
- **등급 선택**: A, B, C, D, F 중 선택
- **기존 평가 수정**: 이미 평가된 과제의 성적 변경 가능
- **평가 이력**: 최종 평가 시간 기록

#### 7.2 코멘트 작성
- **피드백 입력**: 자유형식 텍스트 입력
- **개선사항 제안**: 학생에게 구체적인 피드백 제공
- **기존 코멘트 수정**: 평가 후 코멘트 업데이트 가능

#### 7.3 평가 저장
- **즉시 저장**: 평가 완료 시 실시간 데이터베이스 업데이트
- **중복 방지**: 동일 제출물에 대한 교수별 단일 평가
- **성공 피드백**: 저장 완료 후 확인 메시지

### 8. 참고자료 관리

#### 8.1 파일 업로드
- **파일 유형**: 평가기준, 모범답안 구분
- **지원 형식**: PDF, Word, 텍스트, 한글, PowerPoint
- **저장 위치**: `storage/professor_files/` 디렉토리
- **파일명 규칙**: `{유형}_{교수ID}_{원본파일명}`

#### 8.2 업로드된 파일 관리
- **유형별 분류**: 평가기준과 모범답안 섹션 구분
- **파일 정보**: 파일명, 업로드시간 표시
- **내용 미리보기**: 업로드된 파일 내용 확인 가능
- **삭제 기능**: 불필요한 파일 제거

#### 8.3 파일 내용 보기
- **동일한 뷰어**: 학생 파일과 같은 방식으로 내용 표시
- **확장 영역**: 클릭으로 내용 표시/숨김
- **에러 처리**: 읽기 실패 시 적절한 오류 메시지

---

## 기술적 구현 세부사항

### 9. 데이터베이스 설계

#### 9.1 테이블 구조
```sql
students: 학생 정보 (student_id, password, name, email)
professors: 교수 정보 (admin_id, password, name)
submissions: 제출물 (submission_id, student_id, file_path, original_filename, submission_time)
professor_files: 교수 파일 (file_id, admin_id, file_type, file_path, original_filename, upload_time)
evaluations: 평가 (evaluation_id, submission_id, admin_id, grade, comments, evaluation_time)
```

#### 9.2 관계 설정
- submissions.student_id → students.student_id
- professor_files.admin_id → professors.admin_id
- evaluations.submission_id → submissions.submission_id
- evaluations.admin_id → professors.admin_id

### 10. 파일 시스템

#### 10.1 디렉토리 구조
```
storage/
├── {학번}_{파일명}           # 학생 제출 파일
└── professor_files/
    └── {유형}_{교수ID}_{파일명} # 교수 업로드 파일
```

#### 10.2 파일 처리
- **자동 디렉토리 생성**: 필요시 storage 폴더 자동 생성
- **파일명 충돌 방지**: 학번/교수ID 접두사로 구분
- **동기화**: 파일 삭제 시 DB 기록과 실제 파일 동시 삭제

### 11. 사용자 인터페이스

#### 11.1 탭 구조 (교수)
- **제출 현황**: 학생 제출물 관리 및 평가
- **파일 업로드**: 평가기준, 모범답안 업로드
- **업로드된 파일**: 업로드 파일 관리

#### 11.2 반응형 레이아웃
- **컬럼 구조**: Streamlit columns로 정보 배치
- **확장 영역**: st.expander로 상세 정보 표시/숨김
- **실시간 업데이트**: st.rerun()으로 상태 변경 즉시 반영

### 12. 보안 및 에러 처리

#### 12.1 보안 기능
- **비밀번호 해싱**: hashlib.sha256으로 암호화
- **세션 관리**: st.session_state로 로그인 상태 관리
- **SQL 인젝션 방지**: 매개변수화된 쿼리 사용

#### 12.2 에러 처리
- **파일 읽기 실패**: 지원하지 않는 형식 안내
- **업로드 실패**: 명확한 오류 메시지 제공
- **인코딩 문제**: 다중 인코딩 시도 (UTF-8, CP949)

---

## 사용자 경험 (UX) 개선사항

### 13. 피드백 시스템
- **로딩 스피너**: 파일 처리 중 진행 상태 표시
- **성공 애니메이션**: st.balloons()로 성공 축하
- **색상 코딩**: 성적별 직관적 색상 구분
- **즉시 피드백**: 작업 완료 즉시 결과 메시지

### 14. 편의 기능
- **새로고침 버튼**: 수동 데이터 업데이트
- **자동 새로고침**: 중요 작업 후 자동 페이지 갱신
- **파일 정보 미리보기**: 업로드 전 파일 크기/이름 확인
- **취소 기능**: 평가 입력 중 취소 옵션

---

## 제한사항 및 알려진 이슈

### 15. 현재 제한사항
- **파일 크기**: 브라우저 기본 제한 (일반적으로 200MB)
- **동시 사용자**: SQLite 기반으로 소규모 사용자 대상
- **파일 형식**: HWP 파일은 업로드 가능하나 내용 보기 불가
- **이미지/미디어**: 텍스트 기반 파일만 내용 미리보기 지원

### 16. 향후 개선 예정
- **대용량 파일 지원**: 청크 업로드 구현
- **이미지 미리보기**: PDF 내 이미지 표시
- **다운로드 기능**: 제출된 파일 다운로드
- **알림 시스템**: 이메일 또는 웹 알림
- **통계 대시보드**: 성적 분포, 제출률 통계

---

## 배포 및 운영

### 17. 배포 방법
```bash
# 의존성 설치
pip install streamlit pandas PyPDF2 python-docx

# 애플리케이션 실행
streamlit run app.py --server.port 5000
```

### 18. 운영 고려사항
- **데이터 백업**: database.db와 storage/ 디렉토리 정기 백업
- **디스크 용량**: 제출 파일 누적으로 인한 용량 관리
- **성능 모니터링**: 사용자 증가에 따른 응답시간 확인
- **보안 업데이트**: 의존성 패키지 정기 업데이트

---

## 결론

학생 과제 제출 및 관리 시스템 v1.0은 교육 환경에서 필요한 기본적인 과제 관리 기능을 모두 제공합니다. 직관적인 인터페이스와 실시간 피드백을 통해 학생과 교수 모두에게 편리한 사용 경험을 제공하며, 평가 시스템을 통해 체계적인 학습 관리가 가능합니다.

향후 버전에서는 더 많은 파일 형식 지원, 대용량 파일 처리, 고급 통계 기능 등을 추가하여 더욱 완성도 높은 시스템으로 발전시킬 예정입니다.